(window.webpackJsonp=window.webpackJsonp||[]).push([[228],{861:function(t,s,a){"use strict";a.r(s);var n=a(18),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"一、线程与进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、线程与进程"}},[t._v("#")]),t._v(" 一、线程与进程")]),t._v(" "),a("ul",[a("li",[t._v("JS 是单线程执行的，指的是一个进程里只有一个主线程")])]),t._v(" "),a("h3",{attrs:{id:"_1-1-概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-概念"}},[t._v("#")]),t._v(" 1.1.概念")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("进程是 CPU资源分配的最小单位；线程是 CPU调度的最小单位")])]),t._v(" "),a("li",[t._v("进程好比工厂，有单独的专属自己的工厂资源。")]),t._v(" "),a("li",[t._v("线程好比工人，多个工人在一个工厂中协作工作，工厂与工人是 1:n的关系。也就是说"),a("strong",[t._v("一个进程由一个或多个线程组成，线程是一个进程中代码的不同执行路线")]),t._v("；")]),t._v(" "),a("li",[t._v("多个工厂之间独立存在")])]),t._v(" "),a("h3",{attrs:{id:"_1-2-多进程与多线程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-多进程与多线程"}},[t._v("#")]),t._v(" 1.2.多进程与多线程")]),t._v(" "),a("ul",[a("li",[t._v("多进程：在同一个时间里，同一个计算机系统中如果允许两个或两个以上的进程处于运行状态。\n"),a("ul",[a("li",[t._v("多进程带来的好处，比如你可以听歌的同时，打开编辑器敲代码，编辑器和听歌软件的进程之间丝毫不会相互干扰。")])])]),t._v(" "),a("li",[t._v("多线程：程序中包含多个执行流，即在一个程序中可以同时运行多个不同的线程来执行不同的任务，也就是说允许单个程序创建多个并行执行的线程来完成各自的任务。")])]),t._v(" "),a("ul",[a("li",[t._v("以Chrome浏览器中为例，当你打开一个 Tab 页时，其实就是创建了一个进程，一个进程中可以有多个线程，比如渲染线程、JS 引擎线程、HTTP 请求线程等等。当你发起一个请求时，其实就是创建了一个线程，当请求结束后，该线程可能就会被销毁。")])]),t._v(" "),a("h3",{attrs:{id:"_1-3-单线程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-单线程"}},[t._v("#")]),t._v(" 1.3.单线程")]),t._v(" "),a("ul",[a("li",[t._v("一只有当上一个任务完成之后才会继续完成下一个任务。==>同步操作的概念。")]),t._v(" "),a("li",[a("strong",[t._v("带来的问题")]),t._v("：如果前一个任务耗时很长，后一个任务就得一直等着。这就会导致I/O操作（耗时但cpu闲置）时造成性能浪费的问题。")]),t._v(" "),a("li",[a("strong",[t._v("解决")]),t._v("：异步操作，可以一起执行"),a("strong",[t._v("多个任务")]),t._v("。主线程完全可以不管IO操作，暂时挂起处于等待中的任务，先运行排在后面的任务。等到I/O操作返回了结果，再回过头，把挂起的任务继续执行下去。")]),t._v(" "),a("li",[t._v("I/O：将数据读入内存或者内存输出的过程")])]),t._v(" "),a("h2",{attrs:{id:"二、浏览器内核"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、浏览器内核"}},[t._v("#")]),t._v(" 二、浏览器内核")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("浏览器内核（渲染引擎）")]),t._v("：是通过取得页面内容、整理信息（应用CSS）、计算和组合最终输出可视化的图像结果。")])]),t._v(" "),a("li",[a("p",[t._v("浏览器内核是多线程，在内核控制下各线程相互配合以保持同步，一个浏览器通常由以下常驻线程组成：")]),t._v(" "),a("ul",[a("li",[t._v("GUI 渲染线程")]),t._v(" "),a("li",[t._v("JavaScript引擎线程")]),t._v(" "),a("li",[t._v("定时触发器线程")]),t._v(" "),a("li",[t._v("事件触发线程")]),t._v(" "),a("li",[t._v("异步http请求线程")])])])]),t._v(" "),a("h3",{attrs:{id:"_2-1-gui渲染线程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-gui渲染线程"}},[t._v("#")]),t._v(" 2.1.GUI渲染线程")]),t._v(" "),a("ul",[a("li",[t._v("主要负责页面的渲染，解析HTML、CSS，构建DOM树，布局和绘制等。")]),t._v(" "),a("li",[t._v("当界面需要重绘或者由于某种操作引发回流时，将执行该线程。")]),t._v(" "),a("li",[t._v("该线程与JS引擎线程互斥，当执行JS引擎线程时，GUI渲染会被挂起，当任务队列空闲时，主线程才会去执行GUI渲染。")])]),t._v(" "),a("h3",{attrs:{id:"_2-2-js引擎线程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-js引擎线程"}},[t._v("#")]),t._v(" 2.2.JS引擎线程")]),t._v(" "),a("ul",[a("li",[t._v("主要负责处理 JavaScript脚本，执行代码。")]),t._v(" "),a("li",[t._v("也是主要负责执行准备好待执行的事件，即定时器计数结束，或者异步请求成功并正确返回时，将依次进入"),a("strong",[t._v("任务队列")]),t._v("，等待 JS引擎线程的执行。")]),t._v(" "),a("li",[t._v("当然，该线程与 GUI渲染线程互斥，当 JS引擎线程执行 JavaScript脚本时间过长，将导致页面渲染的阻塞。")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//死循环,会阻塞进程")]),t._v("\n   console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"don\'t carry out"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//不会执行")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h3",{attrs:{id:"_2-3-定时器触发线程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-定时器触发线程"}},[t._v("#")]),t._v(" 2.3.定时器触发线程")]),t._v(" "),a("ul",[a("li",[t._v("负责执行异步定时器一类的函数的线程，如： setTimeout，setInterval。")]),t._v(" "),a("li",[t._v("主线程依次执行代码时，遇到定时器，会将定时器交给该线程处理，当计数完毕后，"),a("strong",[t._v("事件触发线程")]),t._v("会将计数完毕后的事件加入到任务队列的尾部，等待"),a("strong",[t._v("JS引擎线程")]),t._v("执行。")])]),t._v(" "),a("h3",{attrs:{id:"_2-4-事件触发线程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-事件触发线程"}},[t._v("#")]),t._v(" 2.4.事件触发线程")]),t._v(" "),a("ul",[a("li",[t._v("主要负责将准备好的事件交给 JS引擎线程执行。")])]),t._v(" "),a("ul",[a("li",[t._v("比如 setTimeout定时器计数结束， ajax等异步请求成功并触发回调函数，或者用户触发点击事件时，该线程会将整装待发的事件依次加入到任务队列的队尾，等待 JS引擎线程的执行。")])]),t._v(" "),a("h3",{attrs:{id:"_5-异步http请求线程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-异步http请求线程"}},[t._v("#")]),t._v(" 5.异步http请求线程")]),t._v(" "),a("ul",[a("li",[t._v("负责执行异步请求一类的函数的线程，如： Promise，axios，ajax等。")]),t._v(" "),a("li",[t._v("主线程依次执行代码时，遇到异步请求，会将函数交给该线程处理，当监听到状态码变更，如果有回调函数，事件触发线程会将回调函数加入到任务队列的尾部，等待JS引擎线程执行。")])]),t._v(" "),a("h2",{attrs:{id:"三、浏览器中的event-loop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、浏览器中的event-loop"}},[t._v("#")]),t._v(" 三、浏览器中的Event Loop")]),t._v(" "),a("h3",{attrs:{id:"_3-1-执行栈和任务队列"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-执行栈和任务队列"}},[t._v("#")]),t._v(" 3.1.执行栈和任务队列")]),t._v(" "),a("p",[a("strong",[t._v("执行栈")])]),t._v(" "),a("ul",[a("li",[t._v("一个专门用来存放"),a("strong",[t._v("执行代码")]),t._v("的栈内存结构，"),a("strong",[t._v("执行的主线程")]),t._v("。")])]),t._v(" "),a("p",[a("strong",[t._v("任务队列")])]),t._v(" "),a("ul",[a("li",[t._v("当遇到一个异步事件后，并不会一直等待异步事件返回结果，而是会将这个事件挂在与执行栈不同的队列中，我们称之为任务队列。")]),t._v(" "),a("li",[t._v("需要注意的是异步任务必须指定回调函数，当主线程开始执行异步任务，就是执行对应的回调函数。")])]),t._v(" "),a("h3",{attrs:{id:"_3-2-同步任务和异步任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-同步任务和异步任务"}},[t._v("#")]),t._v(" 3.2.同步任务和异步任务")]),t._v(" "),a("ul",[a("li",[t._v("JS是单线程的，可以将所有任务分成两种，一种是同步任务，另一种是异步任务。")])]),t._v(" "),a("p",[a("strong",[t._v("同步任务")])]),t._v(" "),a("ul",[a("li",[t._v("在主线程上排队执行的任务，只有前一个任务执行完毕，才能执行后一个任务。")])]),t._v(" "),a("p",[a("strong",[t._v("异步任务")])]),t._v(" "),a("ul",[a("li",[t._v('不进入主线程，而进入"任务队列"（task queue）的任务，只有"任务队列"通知主线程，某个异步任务可以执行了，该任务才会进入主线程执行。')])]),t._v(" "),a("h3",{attrs:{id:"_3-3-macro-task和micro-task"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-macro-task和micro-task"}},[t._v("#")]),t._v(" 3.3.macro-task和micro-task")]),t._v(" "),a("ul",[a("li",[t._v("异步任务有两种：macro-task(宏任务)和micro-task(微任务)")])]),t._v(" "),a("ul",[a("li",[t._v("宏任务主要包含：setTimeout、setInterval、script（整体代码）、 I/O 操作、UI 渲染等。")]),t._v(" "),a("li",[t._v("微任务主要包含：Promise、MutaionObserverhtml(html5新特性)")])]),t._v(" "),a("h3",{attrs:{id:"_3-4-js异步执行的运行机制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-js异步执行的运行机制"}},[t._v("#")]),t._v(" 3.4.Js异步执行的运行机制")]),t._v(" "),a("ol",[a("li",[t._v("所有同步任务都在主线程上执行，形成一个执行栈。")]),t._v(" "),a("li",[t._v("主线程之外，还存在一个任务队列。只要异步任务有了运行结果，就在任务队列之中放置一个事件。")]),t._v(" "),a("li",[t._v("一旦执行栈中的所有同步任务执行完毕，系统就会读取任务队列，看看里面有哪些事件。那些对应的异步任务，于是结束等待状态，进入执行栈，开始执行。")]),t._v(" "),a("li",[t._v("主线程不断重复上面的第三步。")])]),t._v(" "),a("h3",{attrs:{id:"_3-5-event-loop-过程解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-event-loop-过程解析"}},[t._v("#")]),t._v(" 3.5.Event Loop 过程解析")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("一开始执行栈空，macro 队列里有且只有一个 script 脚本（整体代码）。")])]),t._v(" "),a("li",[a("p",[t._v("全局上下文（script 标签）被推入执行栈，同步代码执行。在执行的过程中，会判断是同步任务还是异步任务，通过对一些接口的调用，可以产生新的 macro-task 与 micro-task，它们会分别被推入各自的任务队列里。")])]),t._v(" "),a("li",[a("p",[t._v("同步代码执行完了，script 脚本会被移出 macro 队列，调用栈Stack会清空。")])]),t._v(" "),a("li",[a("p",[t._v("执行所有的微任务。逐个执行队列中的任务并把它出队，直到队列被清空。")])]),t._v(" "),a("li",[a("p",[t._v("上述过程循环往复，直到两个队列都清空")])]),t._v(" "),a("li",[a("p",[t._v("==注：==宏任务是一个一个的。微任务是一队一队的。只有微任务队列清空才执行宏任务")])])]),t._v(" "),a("p",[a("strong",[t._v("经典例子：")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//t1-宏任务")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nPromise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//t2-微任务")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//打印顺序是 0 3 2 1")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("ol",[a("li",[t._v("script 任务先运行。首先输出 0，遇到Promise实例then微任务，setTimeout宏任务。此时 macro-task有 t1，micro-task有t2，继续执行输出3。")]),t._v(" "),a("li",[t._v("执行所有的微任务t2，输出 2")]),t._v(" "),a("li",[t._v("执行宏任务任务t3，输出1")]),t._v(" "),a("li",[t._v("队列空，执行完毕")])]),t._v(" "),a("p",[a("strong",[t._v("复杂一点的例子：")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    Promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// t2-微任务")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//t3-宏任务")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        Promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//t5-微任务")]),t._v("\n            console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'t5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("t")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//t1-微任务")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//t4-宏任务")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\nscript执行:t1-微队列，t2-微任务，t3-宏任务，输出4，t4-宏任务，输出6\n==>队列：微-> t2-微队列，t1-微任务\n        宏-> t3-宏任务,t4-宏任务\n        \n执行所有的微任务t2、t1:输出2,输出1 \n（注：先执行t2、再执行t1，resolve是用来表示promise的状态，只有promise调用then的时候，then里面的函数才会被推入微任务中。）\n==>队列：微-> \n        宏-> t3-宏任务,t4-宏任务\n        \n执行t3-宏任务：输出3，t5-微任务\n==>队列：微-> t5-微任务\n        宏-> t4-宏任务\n        \n//执行所有的微任务t5：输出t5 \n==>队列：微-> \n        宏-> t4-宏任务\n        \n        \n执行t4-宏任务：输出5\n==>队列：微-> \n        宏-> \n\n\n最后输出结果是：4,6,2，1,3，t5,5\n*/")]),t._v("\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br"),a("span",{staticClass:"line-number"},[t._v("42")]),a("br"),a("span",{staticClass:"line-number"},[t._v("43")]),a("br"),a("span",{staticClass:"line-number"},[t._v("44")]),a("br"),a("span",{staticClass:"line-number"},[t._v("45")]),a("br"),a("span",{staticClass:"line-number"},[t._v("46")]),a("br"),a("span",{staticClass:"line-number"},[t._v("47")]),a("br"),a("span",{staticClass:"line-number"},[t._v("48")]),a("br")])]),a("blockquote",[a("p",[t._v("参考自：")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/qianxiaox/p/14124565.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Js事件循环（Event Loop）机制"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);